{"version":3,"sources":["../node_modules/@fedeghe/interval/dist/index.js","../node_modules/@fedeghe/countdown/dist/index.js","index.js"],"names":["countdown","require","styles","container","fontFamily","padding","backgroundColor","paddingTop","paddingRight","borderRadius","opacity","display","justifyContent","flexDirection","alignItems","plus","width","height","label","color","progress","accentColor","remaining","fontSize","fontWeight","aux","position","right","top","cursor","complete","newrun","rerun","lineHeight","auxActive","target","document","body","create","tag","_ref","_ref$attrs","attrs","_ref$style","style","t","createElement","a","setAttribute","s","fileInput","type","name","accept","value","max","end","memRun","sec2time","sec","h","m","concat","makeFlat","_makeFlat","_x2","_x3","apply","arguments","toString","j","key","isObject","obj","constructor","Object","entries","reduce","acc","_ref2","_ref3","_slicedToArray","k","v","deep","innerK","assign","remove","p","cs","forEach","c","removeChild","append","appendChild","schedule","config","setters","show","runSchedule","beep","d","f","context","AudioContext","oscillator","createOscillator","frequency","connect","destination","start","setTimeout","stop","_runSchedule","_x4","_x5","_x6","_x7","schedules","index","time","length","onTick","_ref4","Math","ceil","run","fi","setLabel","l","innerHTML","setProgress","setRemaining","r","addEventListener","_","e","files","file","reader","FileReader","JSON","parse","result","flatted","again","console","log","readAsText"],"mappings":"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","file":"index.js","sourceRoot":"../source","sourcesContent":["'use strict';\n/*\nInterval v1.0.19\nfedeghe <fedeghe@gmail.com>\nA really simple function to provide a better timing to replace the setInterval\n*/\nconst interval=function(t,n,i){function e(t,n){this.fn=t,this.interval=n,this.int=0,this.counter=0,this.initDate=+new Date,this.active=!1,this.paused=!1,this._onErr=null,this._onEnd=null,this._onPause=null,this._onResume=null,this._pause=null,this._resume=null}var s=function(t){return\"function\"==typeof t};return e.prototype.onEnd=function(t){return s(t)&&(this._onEnd=t),this},e.prototype.onErr=function(t){return s(t)&&(this._onErr=t),this},e.prototype.onPause=function(t){return s(t)&&(this._onPause=t),this},e.prototype.onResume=function(t){return s(t)&&(this._onResume=t),this},e.prototype.end=function(){return this.active=!1,this._onEnd&&this._onEnd(this),this},e.prototype.endsIn=function(t){var n=this;return setTimeout(function(){n.end()},t),this},e.prototype.pause=function(){return this.paused=!0,this._onPause&&this._onPause(this),this},e.prototype.resume=function(){return this.paused=!1,this._onResume&&this._onResume(this),this},e.prototype.runIfActive=function(){return this.active&&this.run(),this},e.prototype.run=function(t){this.active=!0;var n=this;return this.int=this.interval+(this.initDate+this.counter++*this.interval-new Date),t&&t(n),setTimeout(function(){if(!n.paused&&n.active)try{n.fn(n.counter-1)}catch(t){n._onErr&&n._onErr(t,n),n.active=!1}n.runIfActive()},n.int),this},function(t,n){return new e(t,n)}}();\"object\"==typeof exports&&(module.exports=interval);","'use strict';\n/*\nCountdown v0.0.11\nfedeghe <fedeghe@gmail.com>\n$description$\n*/\nconst interval=require(\"@fedeghe/interval\"),countdown=function(){function t(t,i){this.fn=t,this.horizont=i,this.baseHorizont=i,this.to=null,this.active=!1,this.paused=!1,this._onErr=null,this._onEnd=null,this._onTick=null,this.tick=null,this.ticker=null,this.startPause=0,this.pauseSpan=0,this.updates=0,this._onUpdate=null,this._update=null,this._onPause=null,this._pause=null,this._onResume=null,this._resume=null}var i=function(t){return\"function\"==typeof t};return t.prototype.end=function(){return this.active=!1,this._onEnd&&this._onEnd(),this.ticker&&this.ticker.end(),clearTimeout(this.to),this},t.prototype.onEnd=function(t){return i(t)&&(this._onEnd=t),this},t.prototype.onErr=function(t){return i(t)&&(this._onErr=t),this},t.prototype.onPause=function(t){return i(t)&&(this._onPause=t),this},t.prototype.onResume=function(t){return i(t)&&(this._onResume=t),this},t.prototype.onUpdate=function(t){return i(t)&&(this._onUpdate=t),this},t.prototype.pause=function(){return this.paused=!0,this._onPause&&this._onPause(this),this.to&&clearTimeout(this.to),this.startPause=+new Date,this.ticker&&this.ticker.pause(),this},t.prototype.resume=function(){return this.paused=!1,this._onResume&&this._onResume(this),this.pauseSpan=+new Date-this.startPause,this.horizont-=this.pauseSpan,this.run(!1,!0),this.ticker&&this.ticker.resume(),this},t.prototype.getStatus=function(){var t=+new Date,i=t-this.startTime-this.pauseSpan;return{elapsed:i,remaining:this.horizont-i+this.updates,progress:100*i/this.horizont}},t.prototype.run=function(t,i){var e=this;return this.startTime=this.startTime||+new Date,this.active=!0,t&&t(e),this.to=setTimeout(function(){try{e.fn(),e.end(),e.ticker&&e.ticker.end()}catch(t){e._onErr&&e._onErr(t,e),e.active=!1}},this.horizont),!i&&this.ticker&&this.ticker.run(),this},t.prototype.update=function(t){var i=parseInt(t);this.updates=i;var e=+new Date,s=e-this.startTime-this.pauseSpan,n=this.baseHorizont-s,o=i+n;return this.baseHorizont=s+o,o&&o>0&&(this._onUpdate&&this._onUpdate(this),this.horizont=o,this.to&&clearTimeout(this.to),this.run()),this},t.prototype.onTick=function(t,i){var e=this;return this.ticker=interval(function(i){var s=+new Date,n=s-e.startTime-e.pauseSpan,o=e.baseHorizont-n,r=parseFloat((100*n/e.baseHorizont).toFixed(3),10);t({cycle:i,elapsed:n,remaining:o,progress:r})},i),this},function(i,e){return new t(i,e)}}();\"object\"==typeof exports&&(module.exports=countdown);","const countdown = require('@fedeghe/countdown');\n\n(function (){\n    var styles = {\n            container: {\n                fontFamily: 'verdana',\n                padding: '5px',\n                backgroundColor: 'white',\n                paddingTop:'10px',\n                paddingRight:'20px',\n                borderRadius:'5px',\n                opacity:'0.7',\n                display:'flex',\n                justifyContent:'center',\n                flexDirection: 'column',\n                alignItems: 'center'\n            },\n            plus: {\n                width:'20px',\n                height:'20px',\n            },\n            label:{color:'red'},\n            progress:{accentColor:'green', height:'20px'},\n            remaining:{\n                fontSize:'1em',\n                fontWeight: 'bold'\n            },\n            aux:{\n                position:'absolute',\n                right:0,\n                top:0,\n                height:'20px',\n                width:'20px',\n                cursor:'pointer',\n                color: 'black'\n            },\n\n            complete:{\n                fontWeight:'bold',\n            },\n            newrun:{\n                fontSize:'0.8em',\n                color:'green',\n                cursor: 'pointer'\n            },\n            rerun:{\n                fontSize:'1.4em',\n                lineHeight:'0.8em',\n                color:'green',\n                cursor: 'pointer'\n            }\n        },\n        auxActive = true,\n        target = document.body,\n        create = function(tag, {attrs = null, style = null}) {\n            var t = document.createElement(tag);\n            if(attrs) for(a in attrs) t.setAttribute(a, attrs[a]);\n            if(style) for(s in style) t.style[s] = style[s];\n            return t;\n        },\n        aux = create('div', {style: styles.aux}),\n        container = create('div', {style: styles.container}),\n        fileInput = create('input', {attrs: {type:'file', name:'file', accept:'application/json'}}),\n        label = create('div', {style:styles.label}),\n        progress = create('progress', {style:styles.progress, attrs:{value: 0, max:100}}),\n        remaining = create('div', {style:styles.remaining});\n        end = create('div', {style:styles.complete});\n        newrun = create('div', {style:styles.newrun});\n        rerun = create('div', {style:styles.rerun}),\n        memRun = function (){},\n\n        sec2time = function(sec) {\n            var h = ~~ (sec / 3600),\n                m = ~~ ((sec % 3600)/ 60),\n                s = ~~ (sec % 60);\n            return `${h}h ${m}m ${s}s`;\n        },\n        makeFlat = function(j, key){\n            key = key || '';\n            const isObject = obj => obj != null && obj.constructor.name === \"Object\";\n            return Object.entries(j).reduce((acc, [k, v]) => {\n                const deep = isObject(v),\n                      innerK = (key ? key + ' - ' : '') + k;\n                if (deep){\n                  acc = Object.assign({}, acc, makeFlat(v, innerK));\n                } else {\n                  acc[innerK] = v;\n                }\n                return acc;\n            }, {});\n        },\n        remove = function(p, cs){cs.forEach(function(c){p.removeChild(c)})},\n        append = function(p, cs){cs.forEach(function(c){p.appendChild(c)})},\n        schedule = function(config, setters, show, complete){\n            runSchedule(Object.entries(config), 0, setters, complete);\n            show();\n        },\n        beep = function (d, f) {\n            if (!auxActive) return;\n            d = d || 100;\n            f = f || 400;\n            var context = new AudioContext(),\n                oscillator = context.createOscillator();\n            oscillator.type = \"sine\";\n            oscillator.frequency.value = f;\n            oscillator.connect(context.destination);\n            \n            oscillator.start(); \n            setTimeout(function () {\n                oscillator.stop();\n            }, d); \n            \n        },\n\n        runSchedule = function(schedules, index, setters, complete){\n            setTimeout(beep, 100);\n            var label = schedules[index][0],\n                time = schedules[index][1];\n            \n            setters.label(label);\n            setters.progress(1000);\n            setters.remaining(sec2time(time*60));\n            countdown(() => {\n                schedules.length > index+1\n                ? runSchedule(schedules, index+1, setters, complete)\n                : complete()\n            }, time*60e3)\n            .onTick(({progress, remaining}) => {\n                setters.progress(100-progress)\n                setters.remaining(sec2time(Math.ceil(remaining/1000)))\n            },1e3).run()\n        },\n        show = function(fi){\n            append(container, [label, progress, remaining, aux]);\n            !fi && container.removeChild(fileInput);\n        },\n        complete = function(){\n            beep(100, 800);\n            setTimeout(function (){beep(100)}, 100)\n            remove(container, [label, progress, remaining, aux]);\n            append(container, [end, rerun, newrun]);\n        },\n        setLabel = function(l){label.innerHTML = l;},\n        setProgress = function(p){progress.setAttribute('value', p)},\n        setRemaining = function(r){remaining.innerHTML = r};\n\n    end.innerHTML='TIME OVER';\n    rerun.innerHTML='↺';\n    newrun.innerHTML='new';\n    aux.innerHTML='♪';\n\n    rerun.addEventListener('click', function _(){\n        append(container, [label, progress, remaining, aux]);\n        remove(container, [end, rerun, newrun]);\n        memRun(true);\n    });\n\n    newrun.addEventListener('click', function _(){\n        remove(container, [end, rerun, newrun]);\n        container.appendChild(fileInput);\n    });\n    aux.addEventListener('click', function _(){\n        auxActive = !auxActive;\n        aux.style.color = auxActive ? styles.aux.color : '#aaa';\n    });\n\n    fileInput.addEventListener('change', function (e){\n        var files = this.files,\n            file, reader;\n        if (files.length) {\n            file = files[0];\n            reader = new FileReader();\n                \n            reader.addEventListener(\"load\", function () { \n                try {\n                    var j = JSON.parse(reader.result),\n                        flatted = makeFlat(j);\n                    memRun = again => schedule(flatted, {\n                        label: setLabel,\n                        progress: setProgress,\n                        remaining: setRemaining\n                    }, function (){show(again);}, complete);\n                    memRun();\n                } catch(e) {\n                    console.log(e)\n                }\n            }, false);\n            reader.readAsText(file, \"UTF-8\");\n            e.target.value = '';\n        }\n    });\n    container.appendChild(fileInput);\n    target.appendChild(container);\n\n})();\n"]}