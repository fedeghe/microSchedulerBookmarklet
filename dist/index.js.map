{"version":3,"sources":["../node_modules/@fedeghe/interval/dist/index.js","../node_modules/@fedeghe/countdown/dist/index.js","index.js"],"names":["countdown","require","styles","container","fontFamily","padding","backgroundColor","paddingTop","paddingRight","borderRadius","opacity","display","justifyContent","flexDirection","alignItems","plus","width","height","label","color","progress","accentColor","remaining","fontSize","fontWeight","complete","newrun","cursor","rerun","lineHeight","flash","filter","transition","target","document","body","create","tag","_ref","_ref$attrs","attrs","_ref$style","style","t","createElement","a","setAttribute","s","fileInput","type","name","accept","value","max","end","memRun","sec2time","sec","m","concat","makeFlat","_makeFlat","_x2","_x3","apply","arguments","toString","j","key","Object","entries","reduce","acc","_ref2","obj","_ref3","_slicedToArray","k","v","deep","constructor","innerK","assign","remove","p","cs","forEach","c","removeChild","append","appendChild","schedule","config","setters","show","runSchedule","_runSchedule","_x4","_x5","_x6","_x7","schedules","index","time","length","onTick","_ref4","Math","ceil","run","fi","setLabel","l","innerHTML","setProgress","setRemaining","r","addEventListener","e","file","reader","files","FileReader","JSON","parse","result","flatted","again","console","log","readAsText"],"mappings":";AAAA,aAMA,MAAA,EAAA,SAAA,EAAA,EAAA,GAAA,SAAA,EAAA,EAAA,GAAA,KAAA,GAAA,EAAA,KAAA,SAAA,EAAA,KAAA,IAAA,EAAA,KAAA,QAAA,EAAA,KAAA,UAAA,IAAA,KAAA,KAAA,QAAA,EAAA,KAAA,QAAA,EAAA,KAAA,OAAA,KAAA,KAAA,OAAA,KAAA,KAAA,SAAA,KAAA,KAAA,UAAA,KAAA,KAAA,OAAA,KAAA,KAAA,QAAA,KAAA,IAAA,EAAA,SAAA,GAAA,MAAA,mBAAA,GAAA,OAAA,EAAA,UAAA,MAAA,SAAA,GAAA,OAAA,EAAA,KAAA,KAAA,OAAA,GAAA,MAAA,EAAA,UAAA,MAAA,SAAA,GAAA,OAAA,EAAA,KAAA,KAAA,OAAA,GAAA,MAAA,EAAA,UAAA,QAAA,SAAA,GAAA,OAAA,EAAA,KAAA,KAAA,SAAA,GAAA,MAAA,EAAA,UAAA,SAAA,SAAA,GAAA,OAAA,EAAA,KAAA,KAAA,UAAA,GAAA,MAAA,EAAA,UAAA,IAAA,WAAA,OAAA,KAAA,QAAA,EAAA,KAAA,QAAA,KAAA,OAAA,MAAA,MAAA,EAAA,UAAA,OAAA,SAAA,GAAA,IAAA,EAAA,KAAA,OAAA,WAAA,WAAA,EAAA,OAAA,GAAA,MAAA,EAAA,UAAA,MAAA,WAAA,OAAA,KAAA,QAAA,EAAA,KAAA,UAAA,KAAA,SAAA,MAAA,MAAA,EAAA,UAAA,OAAA,WAAA,OAAA,KAAA,QAAA,EAAA,KAAA,WAAA,KAAA,UAAA,MAAA,MAAA,EAAA,UAAA,YAAA,WAAA,OAAA,KAAA,QAAA,KAAA,MAAA,MAAA,EAAA,UAAA,IAAA,SAAA,GAAA,KAAA,QAAA,EAAA,IAAA,EAAA,KAAA,OAAA,KAAA,IAAA,KAAA,UAAA,KAAA,SAAA,KAAA,UAAA,KAAA,SAAA,IAAA,MAAA,GAAA,EAAA,GAAA,WAAA,WAAA,IAAA,EAAA,QAAA,EAAA,OAAA,IAAA,EAAA,GAAA,EAAA,QAAA,GAAA,MAAA,GAAA,EAAA,QAAA,EAAA,OAAA,EAAA,GAAA,EAAA,QAAA,EAAA,EAAA,eAAA,EAAA,KAAA,MAAA,SAAA,EAAA,GAAA,OAAA,IAAA,EAAA,EAAA,IAAA,GAAA,iBAAA,UAAA,OAAA,QAAA;;ACNA,aAMA,MAAA,EAAA,QAAA,qBAAA,EAAA,WAAA,SAAA,EAAA,EAAA,GAAA,KAAA,GAAA,EAAA,KAAA,SAAA,EAAA,KAAA,aAAA,EAAA,KAAA,GAAA,KAAA,KAAA,QAAA,EAAA,KAAA,QAAA,EAAA,KAAA,OAAA,KAAA,KAAA,OAAA,KAAA,KAAA,QAAA,KAAA,KAAA,KAAA,KAAA,KAAA,OAAA,KAAA,KAAA,WAAA,EAAA,KAAA,UAAA,EAAA,KAAA,QAAA,EAAA,KAAA,UAAA,KAAA,KAAA,QAAA,KAAA,KAAA,SAAA,KAAA,KAAA,OAAA,KAAA,KAAA,UAAA,KAAA,KAAA,QAAA,KAAA,IAAA,EAAA,SAAA,GAAA,MAAA,mBAAA,GAAA,OAAA,EAAA,UAAA,IAAA,WAAA,OAAA,KAAA,QAAA,EAAA,KAAA,QAAA,KAAA,SAAA,KAAA,QAAA,KAAA,OAAA,MAAA,aAAA,KAAA,IAAA,MAAA,EAAA,UAAA,MAAA,SAAA,GAAA,OAAA,EAAA,KAAA,KAAA,OAAA,GAAA,MAAA,EAAA,UAAA,MAAA,SAAA,GAAA,OAAA,EAAA,KAAA,KAAA,OAAA,GAAA,MAAA,EAAA,UAAA,QAAA,SAAA,GAAA,OAAA,EAAA,KAAA,KAAA,SAAA,GAAA,MAAA,EAAA,UAAA,SAAA,SAAA,GAAA,OAAA,EAAA,KAAA,KAAA,UAAA,GAAA,MAAA,EAAA,UAAA,SAAA,SAAA,GAAA,OAAA,EAAA,KAAA,KAAA,UAAA,GAAA,MAAA,EAAA,UAAA,MAAA,WAAA,OAAA,KAAA,QAAA,EAAA,KAAA,UAAA,KAAA,SAAA,MAAA,KAAA,IAAA,aAAA,KAAA,IAAA,KAAA,YAAA,IAAA,KAAA,KAAA,QAAA,KAAA,OAAA,QAAA,MAAA,EAAA,UAAA,OAAA,WAAA,OAAA,KAAA,QAAA,EAAA,KAAA,WAAA,KAAA,UAAA,MAAA,KAAA,WAAA,IAAA,KAAA,KAAA,WAAA,KAAA,UAAA,KAAA,UAAA,KAAA,KAAA,GAAA,GAAA,KAAA,QAAA,KAAA,OAAA,SAAA,MAAA,EAAA,UAAA,UAAA,WAAA,IAAA,GAAA,IAAA,KAAA,KAAA,UAAA,KAAA,UAAA,MAAA,CAAA,QAAA,EAAA,UAAA,KAAA,SAAA,EAAA,KAAA,QAAA,SAAA,IAAA,EAAA,KAAA,WAAA,EAAA,UAAA,IAAA,SAAA,EAAA,GAAA,IAAA,EAAA,KAAA,OAAA,KAAA,UAAA,KAAA,YAAA,IAAA,KAAA,KAAA,QAAA,EAAA,GAAA,EAAA,GAAA,KAAA,GAAA,WAAA,WAAA,IAAA,EAAA,KAAA,EAAA,MAAA,EAAA,QAAA,EAAA,OAAA,MAAA,MAAA,GAAA,EAAA,QAAA,EAAA,OAAA,EAAA,GAAA,EAAA,QAAA,IAAA,KAAA,WAAA,GAAA,KAAA,QAAA,KAAA,OAAA,MAAA,MAAA,EAAA,UAAA,OAAA,SAAA,GAAA,IAAA,EAAA,SAAA,GAAA,KAAA,QAAA,EAAA,IAAA,GAAA,IAAA,KAAA,KAAA,UAAA,KAAA,UAAA,EAAA,GAAA,KAAA,aAAA,GAAA,OAAA,KAAA,aAAA,EAAA,EAAA,GAAA,EAAA,IAAA,KAAA,WAAA,KAAA,UAAA,MAAA,KAAA,SAAA,EAAA,KAAA,IAAA,aAAA,KAAA,IAAA,KAAA,OAAA,MAAA,EAAA,UAAA,OAAA,SAAA,EAAA,GAAA,IAAA,EAAA,KAAA,OAAA,KAAA,OAAA,EAAA,SAAA,GAAA,IAAA,GAAA,IAAA,KAAA,EAAA,UAAA,EAAA,UAAA,EAAA,EAAA,aAAA,EAAA,EAAA,YAAA,IAAA,EAAA,EAAA,cAAA,QAAA,GAAA,IAAA,EAAA,CAAA,MAAA,EAAA,QAAA,EAAA,UAAA,EAAA,SAAA,KAAA,GAAA,MAAA,SAAA,EAAA,GAAA,OAAA,IAAA,EAAA,EAAA,IAAA,GAAA,iBAAA,UAAA,OAAA,QAAA;;AC2JI,SAAA,EAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,EAAA,IAAA,EAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,6IAAA,SAAA,EAAA,EAAA,GAAA,GAAA,EAAA,CAAA,GAAA,iBAAA,EAAA,OAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,UAAA,SAAA,KAAA,GAAA,MAAA,GAAA,GAAA,MAAA,WAAA,GAAA,EAAA,cAAA,EAAA,EAAA,YAAA,MAAA,QAAA,GAAA,QAAA,EAAA,MAAA,KAAA,GAAA,cAAA,GAAA,2CAAA,KAAA,GAAA,EAAA,EAAA,QAAA,GAAA,SAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,UAAA,EAAA,EAAA,QAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAAA,SAAA,EAAA,EAAA,GAAA,IAAA,EAAA,MAAA,EAAA,KAAA,oBAAA,QAAA,EAAA,OAAA,WAAA,EAAA,cAAA,GAAA,MAAA,EAAA,CAAA,IAAA,EAAA,EAAA,EAAA,EAAA,EAAA,GAAA,GAAA,EAAA,GAAA,EAAA,IAAA,GAAA,GAAA,EAAA,EAAA,KAAA,IAAA,KAAA,IAAA,EAAA,CAAA,GAAA,OAAA,KAAA,EAAA,OAAA,GAAA,OAAA,OAAA,GAAA,EAAA,EAAA,KAAA,IAAA,QAAA,EAAA,KAAA,EAAA,OAAA,EAAA,SAAA,GAAA,GAAA,IAAA,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,IAAA,GAAA,MAAA,EAAA,SAAA,EAAA,EAAA,SAAA,OAAA,KAAA,GAAA,OAAA,QAAA,GAAA,EAAA,MAAA,GAAA,OAAA,GAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,OAAA,EAjKJ,IAAMA,EAAYC,QAAQ,uBAE1B,WACI,IAAIC,EAAS,CACLC,UAAW,CACPC,WAAY,UACZC,QAAS,MACTC,gBAAiB,QACjBC,WAAW,OACXC,aAAa,OACbC,aAAa,MACbC,QAAQ,MACRC,QAAQ,OACRC,eAAe,SACfC,cAAe,SACfC,WAAY,UAEhBC,KAAM,CACFC,MAAM,OACNC,OAAO,QAEXC,MAAM,CAACC,MAAM,OACbC,SAAS,CAACC,YAAY,QAASJ,OAAO,QACtCK,UAAU,CACNC,SAAS,MACTC,WAAY,QAEhBC,SAAS,CACLD,WAAW,QAEfE,OAAO,CACHH,SAAS,QACTJ,MAAM,QACNQ,OAAQ,WAEZC,MAAM,CACFL,SAAS,QACTM,WAAW,QACXV,MAAM,QACNQ,OAAQ,WAEZG,MAAO,CACHC,OAAQ,eACRC,WAAY,2BAGpBC,EAASC,SAASC,KAClBC,EAAS,SAASC,EAAGC,GAAgC,IAAAC,EAAAD,EAA7BE,MAAAA,OAAQ,IAAHD,EAAG,KAAIA,EAAAE,EAAAH,EAAEI,MAAAA,OAAQ,IAAHD,EAAG,KAAIA,EAC1CE,EAAIT,SAASU,cAAcP,GAC/B,GAAGG,EAAO,IAAIK,KAAKL,EAAOG,EAAEG,aAAaD,EAAGL,EAAMK,IAClD,GAAGH,EAAO,IAAIK,KAAKL,EAAOC,EAAED,MAAMK,GAAKL,EAAMK,GAC7C,OAAOJ,GAEXxC,EAAYiC,EAAO,MAAO,CAACM,MAAOxC,EAAOC,YACzC6C,EAAYZ,EAAO,QAAS,CAACI,MAAO,CAACS,KAAK,OAAQC,KAAK,OAAQC,OAAO,sBACtEjC,EAAQkB,EAAO,MAAO,CAACM,MAAMxC,EAAOgB,QACpCE,EAAWgB,EAAO,WAAY,CAACM,MAAMxC,EAAOkB,SAAUoB,MAAM,CAACY,MAAO,EAAGC,IAAI,OAC3E/B,EAAYc,EAAO,MAAO,CAACM,MAAMxC,EAAOoB,YACxCgC,IAAMlB,EAAO,MAAO,CAACM,MAAMxC,EAAOuB,WAClCC,OAASU,EAAO,MAAO,CAACM,MAAMxC,EAAOwB,SACrCE,MAAQQ,EAAO,MAAO,CAACM,MAAMxC,EAAO0B,QACpC2B,OAAS,aAETC,SAAW,SAASC,GAChB,IACIC,KAASD,EAAM,KAAO,IACtBV,KAAQU,EAAM,IAClB,MAAAE,GAAAA,UAHYF,EAAM,MAGPE,MAAAA,OAAKD,EAACC,MAAAA,OAAKZ,EAAC,MAE3Ba,SAAQC,SAAAA,GAAA,SAAAD,EAAAE,EAAAC,GAAA,OAAAF,EAAAG,MAAAC,KAAAA,WAAA,OAAAL,EAAAM,SAAA,WAAA,OAAAL,EAAAK,YAAAN,EAAAC,CAAG,SAASM,EAAGC,GACnBA,EAAMA,GAAO,GAEb,OAAOC,OAAOC,QAAQH,GAAGI,OAAO,SAACC,EAAGC,GAAa,IADhCC,EACgCC,EAAAC,EAAAH,EAAA,GAAVI,EAACF,EAAA,GAAEG,EAACH,EAAA,GACjCI,EAFqB,OAAdL,EAESI,IAFsC,WAAzBJ,EAAIM,YAAY9B,KAG7C+B,GAAUb,EAAMA,EAAM,IAAM,IAAMS,EAMxC,OALIE,EACFP,EAAMH,OAAOa,OAAO,GAAIV,EAAKZ,SAASkB,EAAGG,IAEzCT,EAAIS,GAAUH,EAETN,GACR,MAEPW,OAAS,SAASC,EAAGC,GAAIA,EAAGC,QAAQ,SAASC,GAAGH,EAAEI,YAAYD,MAC9DE,OAAS,SAASL,EAAGC,GAAIA,EAAGC,QAAQ,SAASC,GAAGH,EAAEM,YAAYH,MAC9DI,SAAW,SAASC,EAAQC,EAASC,EAAMrE,GACvCsE,YAAY1B,OAAOC,QAAQsB,GAAS,EAAGC,EAASpE,GAChDqE,KAEJC,YAAWC,SAAAA,GAAA,SAAAD,EAAAE,EAAAC,EAAAC,EAAAC,GAAA,OAAAJ,EAAAhC,MAAAC,KAAAA,WAAA,OAAA8B,EAAA7B,SAAA,WAAA,OAAA8B,EAAA9B,YAAA6B,EAAAC,CAAG,SAASK,EAAWC,EAAOT,EAASpE,GAC9C,IAAIP,EAAQmF,EAAUC,GAAO,GACzBC,EAAOF,EAAUC,GAAO,GAE5BT,EAAQ3E,MAAMA,GACd2E,EAAQzE,SAAS,KACjByE,EAAQvE,UAAUkC,SAAc,GAAL+C,IAC3BvG,EAAU,WACNqG,EAAUG,OAASF,EAAM,EACvBP,YAAYM,EAAWC,EAAM,EAAGT,EAASpE,GACzCA,KACE,IAAL8E,GACFE,OAAO,SAAAC,GAA2B,IAAzBtF,EAAQsF,EAARtF,SAAUE,EAASoF,EAATpF,UAChBuE,EAAQzE,SAAS,IAAIA,GACrByE,EAAQvE,UAAUkC,SAASmD,KAAKC,KAAKtF,EAAU,QACjD,KAAKuF,QAEXf,KAAO,SAASgB,GACZrB,OAAOtF,EAAW,CAACe,EAAOE,EAAUE,KACnCwF,GAAM3G,EAAUqF,YAAYxC,IAEjCvB,SAAW,WACP0D,OAAOhF,EAAW,CAACe,EAAOE,EAAUE,IACpCmE,OAAOtF,EAAW,CAACmD,IAAK1B,MAAOF,UAEnCqF,SAAW,SAASC,GAAG9F,EAAM+F,UAAYD,GACzCE,YAAc,SAAS9B,GAAGhE,EAAS0B,aAAa,QAASsC,IACzD+B,aAAe,SAASC,GAAG9F,EAAU2F,UAAYG,GAErD9D,IAAI2D,UAAU,YACdrF,MAAMqF,UAAU,IAChBvF,OAAOuF,UAAU,MAEjBrF,MAAMyF,iBAAiB,QAAS,WAC5B5B,OAAOtF,EAAW,CAACe,EAAOE,EAAUE,IACpC6D,OAAOhF,EAAW,CAACmD,IAAK1B,MAAOF,SAC/B6B,QAAO,KAGX7B,OAAO2F,iBAAiB,QAAS,WAC7B5B,OAAOtF,EAAW,CAACmD,IAAK1B,MAAOF,SAC/BvB,EAAUuF,YAAY1C,KAG1BA,EAAUqE,iBAAiB,SAAU,SAAUC,GAC3C,IACIC,EAAMC,EADNC,EAAQ,KAAKA,MAEbA,EAAMjB,SACNe,EAAOE,EAAM,IACbD,EAAS,IAAIE,YAENL,iBAAiB,OAAQ,WAC5B,IACI,IAAIlD,EAAIwD,KAAKC,MAAMJ,EAAOK,QACtBC,EAAUlE,SAASO,GACvBZ,OAAS,SAAAwE,GAAK,OAAIpC,SAASmC,EAAS,CAChC5G,MAAO6F,SACP3F,SAAU8F,YACV5F,UAAW6F,cACZ,WAAYrB,KAAKiC,IAAUtG,WAC9B8B,SACF,MAAM+D,GACJU,QAAQC,IAAIX,MAEjB,GACHE,EAAOU,WAAWX,EAAM,SACxBD,EAAErF,OAAOmB,MAAQ,MAGzBjD,EAAUuF,YAAY1C,GACtBf,EAAOyD,YAAYvF,GA7JvB","file":"index.js","sourceRoot":"../source","sourcesContent":["'use strict';\n/*\nInterval v1.0.19\nfedeghe <fedeghe@gmail.com>\nA really simple function to provide a better timing to replace the setInterval\n*/\nconst interval=function(t,n,i){function e(t,n){this.fn=t,this.interval=n,this.int=0,this.counter=0,this.initDate=+new Date,this.active=!1,this.paused=!1,this._onErr=null,this._onEnd=null,this._onPause=null,this._onResume=null,this._pause=null,this._resume=null}var s=function(t){return\"function\"==typeof t};return e.prototype.onEnd=function(t){return s(t)&&(this._onEnd=t),this},e.prototype.onErr=function(t){return s(t)&&(this._onErr=t),this},e.prototype.onPause=function(t){return s(t)&&(this._onPause=t),this},e.prototype.onResume=function(t){return s(t)&&(this._onResume=t),this},e.prototype.end=function(){return this.active=!1,this._onEnd&&this._onEnd(this),this},e.prototype.endsIn=function(t){var n=this;return setTimeout(function(){n.end()},t),this},e.prototype.pause=function(){return this.paused=!0,this._onPause&&this._onPause(this),this},e.prototype.resume=function(){return this.paused=!1,this._onResume&&this._onResume(this),this},e.prototype.runIfActive=function(){return this.active&&this.run(),this},e.prototype.run=function(t){this.active=!0;var n=this;return this.int=this.interval+(this.initDate+this.counter++*this.interval-new Date),t&&t(n),setTimeout(function(){if(!n.paused&&n.active)try{n.fn(n.counter-1)}catch(t){n._onErr&&n._onErr(t,n),n.active=!1}n.runIfActive()},n.int),this},function(t,n){return new e(t,n)}}();\"object\"==typeof exports&&(module.exports=interval);","'use strict';\n/*\nCountdown v0.0.11\nfedeghe <fedeghe@gmail.com>\n$description$\n*/\nconst interval=require(\"@fedeghe/interval\"),countdown=function(){function t(t,i){this.fn=t,this.horizont=i,this.baseHorizont=i,this.to=null,this.active=!1,this.paused=!1,this._onErr=null,this._onEnd=null,this._onTick=null,this.tick=null,this.ticker=null,this.startPause=0,this.pauseSpan=0,this.updates=0,this._onUpdate=null,this._update=null,this._onPause=null,this._pause=null,this._onResume=null,this._resume=null}var i=function(t){return\"function\"==typeof t};return t.prototype.end=function(){return this.active=!1,this._onEnd&&this._onEnd(),this.ticker&&this.ticker.end(),clearTimeout(this.to),this},t.prototype.onEnd=function(t){return i(t)&&(this._onEnd=t),this},t.prototype.onErr=function(t){return i(t)&&(this._onErr=t),this},t.prototype.onPause=function(t){return i(t)&&(this._onPause=t),this},t.prototype.onResume=function(t){return i(t)&&(this._onResume=t),this},t.prototype.onUpdate=function(t){return i(t)&&(this._onUpdate=t),this},t.prototype.pause=function(){return this.paused=!0,this._onPause&&this._onPause(this),this.to&&clearTimeout(this.to),this.startPause=+new Date,this.ticker&&this.ticker.pause(),this},t.prototype.resume=function(){return this.paused=!1,this._onResume&&this._onResume(this),this.pauseSpan=+new Date-this.startPause,this.horizont-=this.pauseSpan,this.run(!1,!0),this.ticker&&this.ticker.resume(),this},t.prototype.getStatus=function(){var t=+new Date,i=t-this.startTime-this.pauseSpan;return{elapsed:i,remaining:this.horizont-i+this.updates,progress:100*i/this.horizont}},t.prototype.run=function(t,i){var e=this;return this.startTime=this.startTime||+new Date,this.active=!0,t&&t(e),this.to=setTimeout(function(){try{e.fn(),e.end(),e.ticker&&e.ticker.end()}catch(t){e._onErr&&e._onErr(t,e),e.active=!1}},this.horizont),!i&&this.ticker&&this.ticker.run(),this},t.prototype.update=function(t){var i=parseInt(t);this.updates=i;var e=+new Date,s=e-this.startTime-this.pauseSpan,n=this.baseHorizont-s,o=i+n;return this.baseHorizont=s+o,o&&o>0&&(this._onUpdate&&this._onUpdate(this),this.horizont=o,this.to&&clearTimeout(this.to),this.run()),this},t.prototype.onTick=function(t,i){var e=this;return this.ticker=interval(function(i){var s=+new Date,n=s-e.startTime-e.pauseSpan,o=e.baseHorizont-n,r=parseFloat((100*n/e.baseHorizont).toFixed(3),10);t({cycle:i,elapsed:n,remaining:o,progress:r})},i),this},function(i,e){return new t(i,e)}}();\"object\"==typeof exports&&(module.exports=countdown);","const countdown = require('@fedeghe/countdown');\n\n(function (){\n    var styles = {\n            container: {\n                fontFamily: 'verdana',\n                padding: '5px',\n                backgroundColor: 'white',\n                paddingTop:'10px',\n                paddingRight:'20px',\n                borderRadius:'5px',\n                opacity:'0.7',\n                display:'flex',\n                justifyContent:'center',\n                flexDirection: 'column',\n                alignItems: 'center'\n            },\n            plus: {\n                width:'20px',\n                height:'20px',\n            },\n            label:{color:'red'},\n            progress:{accentColor:'green', height:'20px'},\n            remaining:{\n                fontSize:'1em',\n                fontWeight: 'bold'\n            },\n            complete:{\n                fontWeight:'bold',\n            },\n            newrun:{\n                fontSize:'0.8em',\n                color:'green',\n                cursor: 'pointer'\n            },\n            rerun:{\n                fontSize:'1.4em',\n                lineHeight:'0.8em',\n                color:'green',\n                cursor: 'pointer'\n            },\n            flash: {\n                filter: 'invert(100%)',\n                transition: 'filter .3s ease-in-out'\n            }\n        },\n        target = document.body,\n        create = function(tag, {attrs = null, style = null}) {\n            var t = document.createElement(tag);\n            if(attrs) for(a in attrs) t.setAttribute(a, attrs[a]);\n            if(style) for(s in style) t.style[s] = style[s];\n            return t;\n        },\n        container = create('div', {style: styles.container}),\n        fileInput = create('input', {attrs: {type:'file', name:'file', accept:'application/json'}}),\n        label = create('div', {style:styles.label}),\n        progress = create('progress', {style:styles.progress, attrs:{value: 0, max:100}}),\n        remaining = create('div', {style:styles.remaining});\n        end = create('div', {style:styles.complete});\n        newrun = create('div', {style:styles.newrun});\n        rerun = create('div', {style:styles.rerun}),\n        memRun = function (){},\n\n        sec2time = function(sec) {\n            var h = ~~ (sec / 3600),\n                m = ~~ ((sec % 3600)/ 60),\n                s = ~~ (sec % 60);\n            return `${h}h ${m}m ${s}s`;\n        },\n        makeFlat = function(j, key){\n            key = key || '';\n            const isObject = obj => obj != null && obj.constructor.name === \"Object\";\n            return Object.entries(j).reduce((acc, [k, v]) => {\n                const deep = isObject(v),\n                      innerK = (key ? key + ' ' : '') + k;\n                if (deep){\n                  acc = Object.assign({}, acc, makeFlat(v, innerK));\n                } else {\n                  acc[innerK] = v;\n                }\n                return acc;\n            }, {});\n        },\n        remove = function(p, cs){cs.forEach(function(c){p.removeChild(c)})},\n        append = function(p, cs){cs.forEach(function(c){p.appendChild(c)})},\n        schedule = function(config, setters, show, complete){\n            runSchedule(Object.entries(config), 0, setters, complete);\n            show();\n        },\n        runSchedule = function(schedules, index, setters, complete){\n            var label = schedules[index][0],\n                time = schedules[index][1];\n            \n            setters.label(label);\n            setters.progress(1000);\n            setters.remaining(sec2time(time*60));\n            countdown(() => {\n                schedules.length > index+1\n                ? runSchedule(schedules, index+1, setters, complete)\n                : complete()\n            }, time*60e3)\n            .onTick(({progress, remaining}) => {\n                setters.progress(100-progress)\n                setters.remaining(sec2time(Math.ceil(remaining/1000)))\n            },1e3).run()\n        },\n        show = function(fi){\n            append(container, [label, progress, remaining]);\n            !fi && container.removeChild(fileInput);\n        },\n        complete = function(){\n            remove(container, [label, progress, remaining]);\n            append(container, [end, rerun, newrun]);\n        },\n        setLabel = function(l){label.innerHTML = l;},\n        setProgress = function(p){progress.setAttribute('value', p)},\n        setRemaining = function(r){remaining.innerHTML = r};\n\n    end.innerHTML='TIME OVER';\n    rerun.innerHTML='↺';\n    newrun.innerHTML='new';\n\n    rerun.addEventListener('click', function _(){\n        append(container, [label, progress, remaining]);\n        remove(container, [end, rerun, newrun]);\n        memRun(true);\n    });\n\n    newrun.addEventListener('click', function _(){\n        append(container, [end, rerun, newrun]);\n        container.appendChild(fileInput);\n    });\n\n    fileInput.addEventListener('change', function (e){\n        var files = this.files,\n            file, reader;\n        if (files.length) {\n            file = files[0];\n            reader = new FileReader();\n                \n            reader.addEventListener(\"load\", function () { \n                try {\n                    var j = JSON.parse(reader.result),\n                        flatted = makeFlat(j);\n                    memRun = again => schedule(flatted, {\n                        label: setLabel,\n                        progress: setProgress,\n                        remaining: setRemaining\n                    }, function (){show(again);}, complete);\n                    memRun();\n                } catch(e) {\n                    console.log(e)\n                }\n            }, false);\n            reader.readAsText(file, \"UTF-8\");\n            e.target.value = '';\n        }\n    });\n    container.appendChild(fileInput);\n    target.appendChild(container);\n\n})();\n"]}