{"version":3,"sources":["../node_modules/@fedeghe/interval/dist/index.js","../node_modules/@fedeghe/countdown/dist/index.js","index.js"],"names":["countdown","require","styles","container","fontFamily","padding","backgroundColor","position","top","right","width","height","border","borderRadius","opacity","close","cursor","plus","label","color","progress","accentColor","remaining","target","document","body","sec2time","sec","h","m","s","concat","create","tag","_ref","_ref$attrs","attrs","_ref$style","style","t","createElement","a","setAttribute","schedule","config","setters","show","complete","console","log","JSON","stringify","runSchedule","Object","entries","schedules","index","time","length","onTick","_ref2","run","fileInput","type","name","accept","value","max","end","rerun","appendChild","removeChild","setLabel","l","innerHTML","setProgress","p","setRemaining","r","addEventListener","_","removeEventListener","e","files","file","reader","FileReader","j","parse","result","readAsText"],"mappings":"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","file":"index.js","sourceRoot":"../source","sourcesContent":["'use strict';\n/*\nInterval v1.0.19\nfedeghe <fedeghe@gmail.com>\nA really simple function to provide a better timing to replace the setInterval\n*/\nconst interval=function(t,n,i){function e(t,n){this.fn=t,this.interval=n,this.int=0,this.counter=0,this.initDate=+new Date,this.active=!1,this.paused=!1,this._onErr=null,this._onEnd=null,this._onPause=null,this._onResume=null,this._pause=null,this._resume=null}var s=function(t){return\"function\"==typeof t};return e.prototype.onEnd=function(t){return s(t)&&(this._onEnd=t),this},e.prototype.onErr=function(t){return s(t)&&(this._onErr=t),this},e.prototype.onPause=function(t){return s(t)&&(this._onPause=t),this},e.prototype.onResume=function(t){return s(t)&&(this._onResume=t),this},e.prototype.end=function(){return this.active=!1,this._onEnd&&this._onEnd(this),this},e.prototype.endsIn=function(t){var n=this;return setTimeout(function(){n.end()},t),this},e.prototype.pause=function(){return this.paused=!0,this._onPause&&this._onPause(this),this},e.prototype.resume=function(){return this.paused=!1,this._onResume&&this._onResume(this),this},e.prototype.runIfActive=function(){return this.active&&this.run(),this},e.prototype.run=function(t){this.active=!0;var n=this;return this.int=this.interval+(this.initDate+this.counter++*this.interval-new Date),t&&t(n),setTimeout(function(){if(!n.paused&&n.active)try{n.fn(n.counter-1)}catch(t){n._onErr&&n._onErr(t,n),n.active=!1}n.runIfActive()},n.int),this},function(t,n){return new e(t,n)}}();\"object\"==typeof exports&&(module.exports=interval);","'use strict';\n/*\nCountdown v0.0.11\nfedeghe <fedeghe@gmail.com>\n$description$\n*/\nconst interval=require(\"@fedeghe/interval\"),countdown=function(){function t(t,i){this.fn=t,this.horizont=i,this.baseHorizont=i,this.to=null,this.active=!1,this.paused=!1,this._onErr=null,this._onEnd=null,this._onTick=null,this.tick=null,this.ticker=null,this.startPause=0,this.pauseSpan=0,this.updates=0,this._onUpdate=null,this._update=null,this._onPause=null,this._pause=null,this._onResume=null,this._resume=null}var i=function(t){return\"function\"==typeof t};return t.prototype.end=function(){return this.active=!1,this._onEnd&&this._onEnd(),this.ticker&&this.ticker.end(),clearTimeout(this.to),this},t.prototype.onEnd=function(t){return i(t)&&(this._onEnd=t),this},t.prototype.onErr=function(t){return i(t)&&(this._onErr=t),this},t.prototype.onPause=function(t){return i(t)&&(this._onPause=t),this},t.prototype.onResume=function(t){return i(t)&&(this._onResume=t),this},t.prototype.onUpdate=function(t){return i(t)&&(this._onUpdate=t),this},t.prototype.pause=function(){return this.paused=!0,this._onPause&&this._onPause(this),this.to&&clearTimeout(this.to),this.startPause=+new Date,this.ticker&&this.ticker.pause(),this},t.prototype.resume=function(){return this.paused=!1,this._onResume&&this._onResume(this),this.pauseSpan=+new Date-this.startPause,this.horizont-=this.pauseSpan,this.run(!1,!0),this.ticker&&this.ticker.resume(),this},t.prototype.getStatus=function(){var t=+new Date,i=t-this.startTime-this.pauseSpan;return{elapsed:i,remaining:this.horizont-i+this.updates,progress:100*i/this.horizont}},t.prototype.run=function(t,i){var e=this;return this.startTime=this.startTime||+new Date,this.active=!0,t&&t(e),this.to=setTimeout(function(){try{e.fn(),e.end(),e.ticker&&e.ticker.end()}catch(t){e._onErr&&e._onErr(t,e),e.active=!1}},this.horizont),!i&&this.ticker&&this.ticker.run(),this},t.prototype.update=function(t){var i=parseInt(t);this.updates=i;var e=+new Date,s=e-this.startTime-this.pauseSpan,n=this.baseHorizont-s,o=i+n;return this.baseHorizont=s+o,o&&o>0&&(this._onUpdate&&this._onUpdate(this),this.horizont=o,this.to&&clearTimeout(this.to),this.run()),this},t.prototype.onTick=function(t,i){var e=this;return this.ticker=interval(function(i){var s=+new Date,n=s-e.startTime-e.pauseSpan,o=e.baseHorizont-n,r=parseFloat((100*n/e.baseHorizont).toFixed(3),10);t({cycle:i,elapsed:n,remaining:o,progress:r})},i),this},function(i,e){return new t(i,e)}}();\"object\"==typeof exports&&(module.exports=countdown);","const countdown = require('@fedeghe/countdown');\n\n(function (){\n    var styles = {\n            container: {\n                fontFamily: 'verdana',\n                padding: '5px',\n                backgroundColor: 'white',\n                position:'fixed',\n                // top:'-5px',\n                // right:'-5px',\n                top:0,\n                right:0,\n                width:'300px',\n                height:'50px',\n                border:'1px solid black',\n                borderRadius:'5px',\n                opacity:'0.7'\n            },\n            close: {\n                position:'absolute',\n                right:0,\n                top:0,\n                width:'10px',\n                height:'10px',\n                cursor:'pointer'\n            },\n            plus: {\n                width:'20px',\n                height:'20px',\n            },\n            label:{color:'red'},\n            progress:{accentColor:'green'},\n            remaining:{},\n        },\n        target = document.body;\n    \n    function sec2time(sec) {\n        var h = ~~ (sec / 3600),\n            m = ~~ ((sec % 3600)/ 60),\n            s = ~~ (sec % 60);\n        return `${h}h ${m}m ${s}s`;\n    }\n    function create(tag, {attrs = null, style = null}) {\n        var t = document.createElement(tag);\n        if(attrs) for(a in attrs) t.setAttribute(a, attrs[a]);\n        if(style) for(s in style) t.style[s] = style[s];\n\n        return t;\n    }\n    function schedule(config, setters, show, complete){\n        console.log(JSON.stringify(config, null, 2))\n        runSchedule(Object.entries(config), 0, setters, complete)\n        show()\n    }\n    \n    function runSchedule(schedules, index, setters, complete){\n        var label = schedules[index][0],\n            time = schedules[index][1];\n        \n        setters.label(label)\n        setters.progress(0)\n        setters.remaining(sec2time(time*60))\n        countdown(() => {\n            console.log(schedules.length,  index+1,  schedules.length > index+1)\n            if (schedules.length > index+1) {\n                runSchedule(schedules, index+1, setters, complete)\n            } else {\n                console.log('complete')\n                complete()\n            }\n        }, time*60e3)\n        .onTick(({progress, remaining}) => {\n            // console.log({progress, remaining})\n            setters.progress(progress)\n            setters.remaining(sec2time(remaining/1000))\n        },1e3).run()\n    }\n\n\n    //\n    (function(){\n        var container = create('div', {style: styles.container}),\n            fileInput = create('input', {attrs: {type:'file', name:'file', accept:'application/json'}}),\n            close = create('div', {style:styles.close}),\n            label = create('div', {style:styles.label}),\n            progress = create('progress', {style:styles.progress, attrs:{value: 0, max:100}}),\n            remaining = create('div', {style:styles.remaining});\n            end = create('div', {style:styles.complete});\n            rerun = create('div', {style:styles.rerun});\n        function show(){\n            container.appendChild(label);\n            container.appendChild(progress);\n            container.appendChild(remaining);\n            container.removeChild(fileInput);\n        }\n        function complete(){\n            container.removeChild(label);\n            container.removeChild(progress);\n            container.removeChild(remaining);\n            container.appendChild(end);\n            container.appendChild(rerun);\n        }\n        function setLabel(l){label.innerHTML = l}\n        function setProgress(p){progress.setAttribute('value', p)}\n        function setRemaining(r){remaining.innerHTML = r}\n        close.innerHTML='&times;';\n        end.innerHTML='TIME OVER';\n        rerun.innerHTML='run a new schedule';\n        close.addEventListener('click', function (){\n            target.removeChild(container);\n        });\n        rerun.addEventListener('click', function _(){\n            rerun.removeEventListener('click', _)\n            container.removeChild(end);\n            container.removeChild(rerun);\n            container.appendChild(fileInput);\n        })\n        fileInput.addEventListener('change', function (e){\n            var files = this.files;\n\n            if (files.length) {\n                var file = files[0],\n                    reader = new FileReader(); // Creating reader instance from FileReader() API\n                    \n                reader.addEventListener(\"load\", function () { \n                    var j = JSON.parse(reader.result);\n                    schedule(j, {\n                        label: setLabel,\n                        progress: setProgress,\n                        remaining: setRemaining\n                    }, show, complete);\n                }, false);\n                reader.readAsText(file, \"UTF-8\");\n            }\n        });\n        container.appendChild(fileInput);\n        container.appendChild(close);\n        target.appendChild(container);\n    })();\n\n})();\n"]}