{"version":3,"sources":["../node_modules/@fedeghe/interval/dist/index.js","../node_modules/@fedeghe/countdown/dist/index.js","index.js"],"names":["countdown","require","styles","container","fontFamily","padding","backgroundColor","paddingTop","paddingRight","borderRadius","opacity","display","justifyContent","flexDirection","alignItems","plus","width","height","label","color","progress","accentColor","remaining","fontSize","fontWeight","complete","newrun","cursor","rerun","lineHeight","flash","filter","transition","target","document","body","create","tag","_ref","_ref$attrs","attrs","_ref$style","style","t","createElement","a","setAttribute","s","fileInput","type","name","accept","value","max","end","memRun","sec2time","sec","h","m","concat","makeFlat","_makeFlat","_x2","_x3","apply","arguments","toString","j","key","isObject","obj","constructor","Object","entries","reduce","acc","_ref2","_ref3","_slicedToArray","k","v","deep","innerK","assign","remove","p","cs","forEach","c","removeChild","append","appendChild","schedule","config","setters","show","runSchedule","_runSchedule","_x4","_x5","_x6","_x7","schedules","index","time","length","onTick","_ref4","Math","ceil","run","fi","setLabel","l","innerHTML","setProgress","setRemaining","r","addEventListener","_","e","files","file","reader","FileReader","JSON","parse","result","flatted","again","console","log","readAsText"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACNA,IAAMA,SAAS,GAAGC,OAAO,CAAC,oBAAoB,CAAC;AAE/C,CAAC,YAAW;EACR,IAAIC,MAAM,GAAG;MACLC,SAAS,EAAE;QACPC,UAAU,EAAE,SAAS;QACrBC,OAAO,EAAE,KAAK;QACdC,eAAe,EAAE,OAAO;QACxBC,UAAU,EAAC,MAAM;QACjBC,YAAY,EAAC,MAAM;QACnBC,YAAY,EAAC,KAAK;QAClBC,OAAO,EAAC,KAAK;QACbC,OAAO,EAAC,MAAM;QACdC,cAAc,EAAC,QAAQ;QACvBC,aAAa,EAAE,QAAQ;QACvBC,UAAU,EAAE;MAChB,CAAC;MACDC,IAAI,EAAE;QACFC,KAAK,EAAC,MAAM;QACZC,MAAM,EAAC;MACX,CAAC;MACDC,KAAK,EAAC;QAACC,KAAK,EAAC;MAAK,CAAC;MACnBC,QAAQ,EAAC;QAACC,WAAW,EAAC,OAAO;QAAEJ,MAAM,EAAC;MAAM,CAAC;MAC7CK,SAAS,EAAC;QACNC,QAAQ,EAAC,KAAK;QACdC,UAAU,EAAE;MAChB,CAAC;MACDC,QAAQ,EAAC;QACLD,UAAU,EAAC;MACf,CAAC;MACDE,MAAM,EAAC;QACHH,QAAQ,EAAC,OAAO;QAChBJ,KAAK,EAAC,OAAO;QACbQ,MAAM,EAAE;MACZ,CAAC;MACDC,KAAK,EAAC;QACFL,QAAQ,EAAC,OAAO;QAChBM,UAAU,EAAC,OAAO;QAClBV,KAAK,EAAC,OAAO;QACbQ,MAAM,EAAE;MACZ,CAAC;MACDG,KAAK,EAAE;QACHC,MAAM,EAAE,cAAc;QACtBC,UAAU,EAAE;MAChB;IACJ,CAAC;IACDC,MAAM,GAAGC,QAAQ,CAACC,IAAI;IACtBC,MAAM,GAAG,SAATA,MAAMA,CAAYC,GAAG,EAAAC,IAAA,EAAgC;MAAA,IAAAC,UAAA,GAAAD,IAAA,CAA7BE,KAAK;QAALA,KAAK,GAAAD,UAAA,cAAG,IAAI,GAAAA,UAAA;QAAAE,UAAA,GAAAH,IAAA,CAAEI,KAAK;QAALA,KAAK,GAAAD,UAAA,cAAG,IAAI,GAAAA,UAAA;MAC9C,IAAIE,CAAC,GAAGT,QAAQ,CAACU,aAAa,CAACP,GAAG,CAAC;MACnC,IAAGG,KAAK,EAAE,KAAIK,CAAC,IAAIL,KAAK,EAAEG,CAAC,CAACG,YAAY,CAACD,CAAC,EAAEL,KAAK,CAACK,CAAC,CAAC,CAAC;MACrD,IAAGH,KAAK,EAAE,KAAIK,CAAC,IAAIL,KAAK,EAAEC,CAAC,CAACD,KAAK,CAACK,CAAC,CAAC,GAAGL,KAAK,CAACK,CAAC,CAAC;MAC/C,OAAOJ,CAAC;IACZ,CAAC;IACDxC,SAAS,GAAGiC,MAAM,CAAC,KAAK,EAAE;MAACM,KAAK,EAAExC,MAAM,CAACC;IAAS,CAAC,CAAC;IACpD6C,SAAS,GAAGZ,MAAM,CAAC,OAAO,EAAE;MAACI,KAAK,EAAE;QAACS,IAAI,EAAC,MAAM;QAAEC,IAAI,EAAC,MAAM;QAAEC,MAAM,EAAC;MAAkB;IAAC,CAAC,CAAC;IAC3FjC,KAAK,GAAGkB,MAAM,CAAC,KAAK,EAAE;MAACM,KAAK,EAACxC,MAAM,CAACgB;IAAK,CAAC,CAAC;IAC3CE,QAAQ,GAAGgB,MAAM,CAAC,UAAU,EAAE;MAACM,KAAK,EAACxC,MAAM,CAACkB,QAAQ;MAAEoB,KAAK,EAAC;QAACY,KAAK,EAAE,CAAC;QAAEC,GAAG,EAAC;MAAG;IAAC,CAAC,CAAC;IACjF/B,SAAS,GAAGc,MAAM,CAAC,KAAK,EAAE;MAACM,KAAK,EAACxC,MAAM,CAACoB;IAAS,CAAC,CAAC;EACnDgC,GAAG,GAAGlB,MAAM,CAAC,KAAK,EAAE;IAACM,KAAK,EAACxC,MAAM,CAACuB;EAAQ,CAAC,CAAC;EAC5CC,MAAM,GAAGU,MAAM,CAAC,KAAK,EAAE;IAACM,KAAK,EAACxC,MAAM,CAACwB;EAAM,CAAC,CAAC;EAC7CE,KAAK,GAAGQ,MAAM,CAAC,KAAK,EAAE;IAACM,KAAK,EAACxC,MAAM,CAAC0B;EAAK,CAAC,CAAC,EAC3C2B,MAAM,GAAG,SAAAA,OAAA,EAAW,CAAC,CAAC,EAEtBC,QAAQ,GAAG,SAAAA,SAASC,GAAG,EAAE;IACrB,IAAIC,CAAC,GAAG,CAAC,EAAGD,GAAG,GAAG,IAAI,CAAC;MACnBE,CAAC,GAAG,CAAC,EAAIF,GAAG,GAAG,IAAI,GAAG,EAAE,CAAC;MACzBV,CAAC,GAAG,CAAC,EAAGU,GAAG,GAAG,EAAE,CAAC;IACrB,UAAAG,MAAA,CAAUF,CAAC,QAAAE,MAAA,CAAKD,CAAC,QAAAC,MAAA,CAAKb,CAAC;EAC3B,CAAC,EACDc,QAAQ,aAAAC,SAAA;IAAA,SAAAD,SAAAE,GAAA,EAAAC,GAAA;MAAA,OAAAF,SAAA,CAAAG,KAAA,OAAAC,SAAA;IAAA;IAAAL,QAAA,CAAAM,QAAA;MAAA,OAAAL,SAAA,CAAAK,QAAA;IAAA;IAAA,OAAAN,QAAA;EAAA,EAAG,UAASO,CAAC,EAAEC,GAAG,EAAC;IACvBA,GAAG,GAAGA,GAAG,IAAI,EAAE;IACf,IAAMC,QAAQ,GAAG,SAAXA,QAAQA,CAAGC,GAAG;MAAA,OAAIA,GAAG,IAAI,IAAI,IAAIA,GAAG,CAACC,WAAW,CAACtB,IAAI,KAAK,QAAQ;IAAA;IACxE,OAAOuB,MAAM,CAACC,OAAO,CAACN,CAAC,CAAC,CAACO,MAAM,CAAC,UAACC,GAAG,EAAAC,KAAA,EAAa;MAAA,IAAAC,KAAA,GAAAC,cAAA,CAAAF,KAAA;QAAVG,CAAC,GAAAF,KAAA;QAAEG,CAAC,GAAAH,KAAA;MACvC,IAAMI,IAAI,GAAGZ,QAAQ,CAACW,CAAC,CAAC;QAClBE,MAAM,GAAG,CAACd,GAAG,GAAGA,GAAG,GAAG,KAAK,GAAG,EAAE,IAAIW,CAAC;MAC3C,IAAIE,IAAI,EAAC;QACPN,GAAG,GAAGH,MAAM,CAACW,MAAM,CAAC,CAAC,CAAC,EAAER,GAAG,EAAEf,QAAQ,CAACoB,CAAC,EAAEE,MAAM,CAAC,CAAC;MACnD,CAAC,MAAM;QACLP,GAAG,CAACO,MAAM,CAAC,GAAGF,CAAC;MACjB;MACA,OAAOL,GAAG;IACd,CAAC,EAAE,CAAC,CAAC,CAAC;EACV,CAAC,GACDS,MAAM,GAAG,SAAAA,OAASC,CAAC,EAAEC,EAAE,EAAC;IAACA,EAAE,CAACC,OAAO,CAAC,UAASC,CAAC,EAAC;MAACH,CAAC,CAACI,WAAW,CAACD,CAAC,CAAC;IAAA,CAAC,CAAC;EAAA,CAAC,EACnEE,MAAM,GAAG,SAAAA,OAASL,CAAC,EAAEC,EAAE,EAAC;IAACA,EAAE,CAACC,OAAO,CAAC,UAASC,CAAC,EAAC;MAACH,CAAC,CAACM,WAAW,CAACH,CAAC,CAAC;IAAA,CAAC,CAAC;EAAA,CAAC,EACnEI,QAAQ,GAAG,SAAAA,SAASC,MAAM,EAAEC,OAAO,EAAEC,IAAI,EAAEvE,QAAQ,EAAC;IAChDwE,WAAW,CAACxB,MAAM,CAACC,OAAO,CAACoB,MAAM,CAAC,EAAE,CAAC,EAAEC,OAAO,EAAEtE,QAAQ,CAAC;IACzDuE,IAAI,EAAE;EACV,CAAC,EACDC,WAAW,aAAAC,YAAA;IAAA,SAAAD,YAAAE,GAAA,EAAAC,GAAA,EAAAC,GAAA,EAAAC,GAAA;MAAA,OAAAJ,YAAA,CAAAjC,KAAA,OAAAC,SAAA;IAAA;IAAA+B,WAAA,CAAA9B,QAAA;MAAA,OAAA+B,YAAA,CAAA/B,QAAA;IAAA;IAAA,OAAA8B,WAAA;EAAA,EAAG,UAASM,SAAS,EAAEC,KAAK,EAAET,OAAO,EAAEtE,QAAQ,EAAC;IACvD,IAAIP,KAAK,GAAGqF,SAAS,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC;MAC3BC,IAAI,GAAGF,SAAS,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC;IAE9BT,OAAO,CAAC7E,KAAK,CAACA,KAAK,CAAC;IACpB6E,OAAO,CAAC3E,QAAQ,CAAC,IAAI,CAAC;IACtB2E,OAAO,CAACzE,SAAS,CAACkC,QAAQ,CAACiD,IAAI,GAAC,EAAE,CAAC,CAAC;IACpCzG,SAAS,CAAC,YAAM;MACZuG,SAAS,CAACG,MAAM,GAAGF,KAAK,GAAC,CAAC,GACxBP,WAAW,CAACM,SAAS,EAAEC,KAAK,GAAC,CAAC,EAAET,OAAO,EAAEtE,QAAQ,CAAC,GAClDA,QAAQ,EAAE;IAChB,CAAC,EAAEgF,IAAI,GAAC,IAAI,CAAC,CACZE,MAAM,CAAC,UAAAC,KAAA,EAA2B;MAAA,IAAzBxF,QAAQ,GAAAwF,KAAA,CAARxF,QAAQ;QAAEE,SAAS,GAAAsF,KAAA,CAATtF,SAAS;MACzByE,OAAO,CAAC3E,QAAQ,CAAC,GAAG,GAACA,QAAQ,CAAC;MAC9B2E,OAAO,CAACzE,SAAS,CAACkC,QAAQ,CAACqD,IAAI,CAACC,IAAI,CAACxF,SAAS,GAAC,IAAI,CAAC,CAAC,CAAC;IAC1D,CAAC,EAAC,GAAG,CAAC,CAACyF,GAAG,EAAE;EAChB,CAAC,GACDf,IAAI,GAAG,SAAAA,KAASgB,EAAE,EAAC;IACfrB,MAAM,CAACxF,SAAS,EAAE,CAACe,KAAK,EAAEE,QAAQ,EAAEE,SAAS,CAAC,CAAC;IAC/C,CAAC0F,EAAE,IAAI7G,SAAS,CAACuF,WAAW,CAAC1C,SAAS,CAAC;EAC3C,CAAC,EACDvB,QAAQ,GAAG,SAAAA,SAAA,EAAU;IACjB4D,MAAM,CAAClF,SAAS,EAAE,CAACe,KAAK,EAAEE,QAAQ,EAAEE,SAAS,CAAC,CAAC;IAC/CqE,MAAM,CAACxF,SAAS,EAAE,CAACmD,GAAG,EAAE1B,KAAK,EAAEF,MAAM,CAAC,CAAC;EAC3C,CAAC,EACDuF,QAAQ,GAAG,SAAAA,SAASC,CAAC,EAAC;IAAChG,KAAK,CAACiG,SAAS,GAAGD,CAAC;EAAC,CAAC,EAC5CE,WAAW,GAAG,SAAAA,YAAS9B,CAAC,EAAC;IAAClE,QAAQ,CAAC0B,YAAY,CAAC,OAAO,EAAEwC,CAAC,CAAC;EAAA,CAAC,EAC5D+B,YAAY,GAAG,SAAAA,aAASC,CAAC,EAAC;IAAChG,SAAS,CAAC6F,SAAS,GAAGG,CAAC;EAAA,CAAC;EAEvDhE,GAAG,CAAC6D,SAAS,GAAC,WAAW;EACzBvF,KAAK,CAACuF,SAAS,GAAC,GAAG;EACnBzF,MAAM,CAACyF,SAAS,GAAC,KAAK;EAEtBvF,KAAK,CAAC2F,gBAAgB,CAAC,OAAO,EAAE,SAASC,CAACA,CAAA,EAAE;IACxC7B,MAAM,CAACxF,SAAS,EAAE,CAACe,KAAK,EAAEE,QAAQ,EAAEE,SAAS,CAAC,CAAC;IAC/C+D,MAAM,CAAClF,SAAS,EAAE,CAACmD,GAAG,EAAE1B,KAAK,EAAEF,MAAM,CAAC,CAAC;IACvC6B,MAAM,CAAC,IAAI,CAAC;EAChB,CAAC,CAAC;EAEF7B,MAAM,CAAC6F,gBAAgB,CAAC,OAAO,EAAE,SAASC,CAACA,CAAA,EAAE;IACzC7B,MAAM,CAACxF,SAAS,EAAE,CAACmD,GAAG,EAAE1B,KAAK,EAAEF,MAAM,CAAC,CAAC;IACvCvB,SAAS,CAACyF,WAAW,CAAC5C,SAAS,CAAC;EACpC,CAAC,CAAC;EAEFA,SAAS,CAACuE,gBAAgB,CAAC,QAAQ,EAAE,UAAUE,CAAC,EAAC;IAC7C,IAAIC,KAAK,GAAG,IAAI,CAACA,KAAK;MAClBC,IAAI;MAAEC,MAAM;IAChB,IAAIF,KAAK,CAAChB,MAAM,EAAE;MACdiB,IAAI,GAAGD,KAAK,CAAC,CAAC,CAAC;MACfE,MAAM,GAAG,IAAIC,UAAU,EAAE;MAEzBD,MAAM,CAACL,gBAAgB,CAAC,MAAM,EAAE,YAAY;QACxC,IAAI;UACA,IAAInD,CAAC,GAAG0D,IAAI,CAACC,KAAK,CAACH,MAAM,CAACI,MAAM,CAAC;YAC7BC,OAAO,GAAGpE,QAAQ,CAACO,CAAC,CAAC;UACzBb,MAAM,GAAG,SAAAA,OAAA2E,KAAK;YAAA,OAAIrC,QAAQ,CAACoC,OAAO,EAAE;cAChC/G,KAAK,EAAE+F,QAAQ;cACf7F,QAAQ,EAAEgG,WAAW;cACrB9F,SAAS,EAAE+F;YACf,CAAC,EAAE,YAAW;cAACrB,IAAI,CAACkC,KAAK,CAAC;YAAC,CAAC,EAAEzG,QAAQ,CAAC;UAAA;UACvC8B,MAAM,EAAE;QACZ,CAAC,CAAC,OAAMkE,CAAC,EAAE;UACPU,OAAO,CAACC,GAAG,CAACX,CAAC,CAAC;QAClB;MACJ,CAAC,EAAE,KAAK,CAAC;MACTG,MAAM,CAACS,UAAU,CAACV,IAAI,EAAE,OAAO,CAAC;MAChCF,CAAC,CAACxF,MAAM,CAACmB,KAAK,GAAG,EAAE;IACvB;EACJ,CAAC,CAAC;EACFjD,SAAS,CAACyF,WAAW,CAAC5C,SAAS,CAAC;EAChCf,MAAM,CAAC2D,WAAW,CAACzF,SAAS,CAAC;AAEjC,CAAC,GAAG","file":"index.js","sourceRoot":"../source","sourcesContent":["'use strict';\n/*\nInterval v1.0.19\nfedeghe <fedeghe@gmail.com>\nA really simple function to provide a better timing to replace the setInterval\n*/\nconst interval=function(t,n,i){function e(t,n){this.fn=t,this.interval=n,this.int=0,this.counter=0,this.initDate=+new Date,this.active=!1,this.paused=!1,this._onErr=null,this._onEnd=null,this._onPause=null,this._onResume=null,this._pause=null,this._resume=null}var s=function(t){return\"function\"==typeof t};return e.prototype.onEnd=function(t){return s(t)&&(this._onEnd=t),this},e.prototype.onErr=function(t){return s(t)&&(this._onErr=t),this},e.prototype.onPause=function(t){return s(t)&&(this._onPause=t),this},e.prototype.onResume=function(t){return s(t)&&(this._onResume=t),this},e.prototype.end=function(){return this.active=!1,this._onEnd&&this._onEnd(this),this},e.prototype.endsIn=function(t){var n=this;return setTimeout(function(){n.end()},t),this},e.prototype.pause=function(){return this.paused=!0,this._onPause&&this._onPause(this),this},e.prototype.resume=function(){return this.paused=!1,this._onResume&&this._onResume(this),this},e.prototype.runIfActive=function(){return this.active&&this.run(),this},e.prototype.run=function(t){this.active=!0;var n=this;return this.int=this.interval+(this.initDate+this.counter++*this.interval-new Date),t&&t(n),setTimeout(function(){if(!n.paused&&n.active)try{n.fn(n.counter-1)}catch(t){n._onErr&&n._onErr(t,n),n.active=!1}n.runIfActive()},n.int),this},function(t,n){return new e(t,n)}}();\"object\"==typeof exports&&(module.exports=interval);","'use strict';\n/*\nCountdown v0.0.11\nfedeghe <fedeghe@gmail.com>\n$description$\n*/\nconst interval=require(\"@fedeghe/interval\"),countdown=function(){function t(t,i){this.fn=t,this.horizont=i,this.baseHorizont=i,this.to=null,this.active=!1,this.paused=!1,this._onErr=null,this._onEnd=null,this._onTick=null,this.tick=null,this.ticker=null,this.startPause=0,this.pauseSpan=0,this.updates=0,this._onUpdate=null,this._update=null,this._onPause=null,this._pause=null,this._onResume=null,this._resume=null}var i=function(t){return\"function\"==typeof t};return t.prototype.end=function(){return this.active=!1,this._onEnd&&this._onEnd(),this.ticker&&this.ticker.end(),clearTimeout(this.to),this},t.prototype.onEnd=function(t){return i(t)&&(this._onEnd=t),this},t.prototype.onErr=function(t){return i(t)&&(this._onErr=t),this},t.prototype.onPause=function(t){return i(t)&&(this._onPause=t),this},t.prototype.onResume=function(t){return i(t)&&(this._onResume=t),this},t.prototype.onUpdate=function(t){return i(t)&&(this._onUpdate=t),this},t.prototype.pause=function(){return this.paused=!0,this._onPause&&this._onPause(this),this.to&&clearTimeout(this.to),this.startPause=+new Date,this.ticker&&this.ticker.pause(),this},t.prototype.resume=function(){return this.paused=!1,this._onResume&&this._onResume(this),this.pauseSpan=+new Date-this.startPause,this.horizont-=this.pauseSpan,this.run(!1,!0),this.ticker&&this.ticker.resume(),this},t.prototype.getStatus=function(){var t=+new Date,i=t-this.startTime-this.pauseSpan;return{elapsed:i,remaining:this.horizont-i+this.updates,progress:100*i/this.horizont}},t.prototype.run=function(t,i){var e=this;return this.startTime=this.startTime||+new Date,this.active=!0,t&&t(e),this.to=setTimeout(function(){try{e.fn(),e.end(),e.ticker&&e.ticker.end()}catch(t){e._onErr&&e._onErr(t,e),e.active=!1}},this.horizont),!i&&this.ticker&&this.ticker.run(),this},t.prototype.update=function(t){var i=parseInt(t);this.updates=i;var e=+new Date,s=e-this.startTime-this.pauseSpan,n=this.baseHorizont-s,o=i+n;return this.baseHorizont=s+o,o&&o>0&&(this._onUpdate&&this._onUpdate(this),this.horizont=o,this.to&&clearTimeout(this.to),this.run()),this},t.prototype.onTick=function(t,i){var e=this;return this.ticker=interval(function(i){var s=+new Date,n=s-e.startTime-e.pauseSpan,o=e.baseHorizont-n,r=parseFloat((100*n/e.baseHorizont).toFixed(3),10);t({cycle:i,elapsed:n,remaining:o,progress:r})},i),this},function(i,e){return new t(i,e)}}();\"object\"==typeof exports&&(module.exports=countdown);","const countdown = require('@fedeghe/countdown');\n\n(function (){\n    var styles = {\n            container: {\n                fontFamily: 'verdana',\n                padding: '5px',\n                backgroundColor: 'white',\n                paddingTop:'10px',\n                paddingRight:'20px',\n                borderRadius:'5px',\n                opacity:'0.7',\n                display:'flex',\n                justifyContent:'center',\n                flexDirection: 'column',\n                alignItems: 'center'\n            },\n            plus: {\n                width:'20px',\n                height:'20px',\n            },\n            label:{color:'red'},\n            progress:{accentColor:'green', height:'20px'},\n            remaining:{\n                fontSize:'1em',\n                fontWeight: 'bold'\n            },\n            complete:{\n                fontWeight:'bold',\n            },\n            newrun:{\n                fontSize:'0.8em',\n                color:'green',\n                cursor: 'pointer'\n            },\n            rerun:{\n                fontSize:'1.4em',\n                lineHeight:'0.8em',\n                color:'green',\n                cursor: 'pointer'\n            },\n            flash: {\n                filter: 'invert(100%)',\n                transition: 'filter .3s ease-in-out'\n            }\n        },\n        target = document.body,\n        create = function(tag, {attrs = null, style = null}) {\n            var t = document.createElement(tag);\n            if(attrs) for(a in attrs) t.setAttribute(a, attrs[a]);\n            if(style) for(s in style) t.style[s] = style[s];\n            return t;\n        },\n        container = create('div', {style: styles.container}),\n        fileInput = create('input', {attrs: {type:'file', name:'file', accept:'application/json'}}),\n        label = create('div', {style:styles.label}),\n        progress = create('progress', {style:styles.progress, attrs:{value: 0, max:100}}),\n        remaining = create('div', {style:styles.remaining});\n        end = create('div', {style:styles.complete});\n        newrun = create('div', {style:styles.newrun});\n        rerun = create('div', {style:styles.rerun}),\n        memRun = function (){},\n\n        sec2time = function(sec) {\n            var h = ~~ (sec / 3600),\n                m = ~~ ((sec % 3600)/ 60),\n                s = ~~ (sec % 60);\n            return `${h}h ${m}m ${s}s`;\n        },\n        makeFlat = function(j, key){\n            key = key || '';\n            const isObject = obj => obj != null && obj.constructor.name === \"Object\";\n            return Object.entries(j).reduce((acc, [k, v]) => {\n                const deep = isObject(v),\n                      innerK = (key ? key + ' - ' : '') + k;\n                if (deep){\n                  acc = Object.assign({}, acc, makeFlat(v, innerK));\n                } else {\n                  acc[innerK] = v;\n                }\n                return acc;\n            }, {});\n        },\n        remove = function(p, cs){cs.forEach(function(c){p.removeChild(c)})},\n        append = function(p, cs){cs.forEach(function(c){p.appendChild(c)})},\n        schedule = function(config, setters, show, complete){\n            runSchedule(Object.entries(config), 0, setters, complete);\n            show();\n        },\n        runSchedule = function(schedules, index, setters, complete){\n            var label = schedules[index][0],\n                time = schedules[index][1];\n            \n            setters.label(label);\n            setters.progress(1000);\n            setters.remaining(sec2time(time*60));\n            countdown(() => {\n                schedules.length > index+1\n                ? runSchedule(schedules, index+1, setters, complete)\n                : complete()\n            }, time*60e3)\n            .onTick(({progress, remaining}) => {\n                setters.progress(100-progress)\n                setters.remaining(sec2time(Math.ceil(remaining/1000)))\n            },1e3).run()\n        },\n        show = function(fi){\n            append(container, [label, progress, remaining]);\n            !fi && container.removeChild(fileInput);\n        },\n        complete = function(){\n            remove(container, [label, progress, remaining]);\n            append(container, [end, rerun, newrun]);\n        },\n        setLabel = function(l){label.innerHTML = l;},\n        setProgress = function(p){progress.setAttribute('value', p)},\n        setRemaining = function(r){remaining.innerHTML = r};\n\n    end.innerHTML='TIME OVER';\n    rerun.innerHTML='↺';\n    newrun.innerHTML='new';\n\n    rerun.addEventListener('click', function _(){\n        append(container, [label, progress, remaining]);\n        remove(container, [end, rerun, newrun]);\n        memRun(true);\n    });\n\n    newrun.addEventListener('click', function _(){\n        append(container, [end, rerun, newrun]);\n        container.appendChild(fileInput);\n    });\n\n    fileInput.addEventListener('change', function (e){\n        var files = this.files,\n            file, reader;\n        if (files.length) {\n            file = files[0];\n            reader = new FileReader();\n                \n            reader.addEventListener(\"load\", function () { \n                try {\n                    var j = JSON.parse(reader.result),\n                        flatted = makeFlat(j);\n                    memRun = again => schedule(flatted, {\n                        label: setLabel,\n                        progress: setProgress,\n                        remaining: setRemaining\n                    }, function (){show(again);}, complete);\n                    memRun();\n                } catch(e) {\n                    console.log(e)\n                }\n            }, false);\n            reader.readAsText(file, \"UTF-8\");\n            e.target.value = '';\n        }\n    });\n    container.appendChild(fileInput);\n    target.appendChild(container);\n\n})();\n"]}